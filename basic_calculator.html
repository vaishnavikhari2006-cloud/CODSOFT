<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Neon Glassmorphism Calculator â€“ Ultimate Visuals</title>
    <style>
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: radial-gradient(circle at center, #020024, #000);
            font-family: 'Segoe UI', sans-serif;
            overflow: hidden;
        }

        .parallax {
            position: absolute;
            inset: 0;
            perspective: 900px;
            pointer-events: none;
        }

        .layer {
            position: absolute;
            inset: -60px;
            opacity: 0.2;
            animation: drift 20s linear infinite;
        }

        .layer.one {
            background-image: radial-gradient(#00fff0 1px, transparent 1px);
            background-size: 45px 45px;
            animation-duration: 25s;
        }

        .layer.two {
            background-image: radial-gradient(#ff4b2b 1px, transparent 1px);
            background-size: 80px 80px;
            animation-duration: 40s;
        }

        @keyframes drift {
            from { transform: translate3d(0,0,0); }
            to { transform: translate3d(-200px, -200px, 0); }
        }

        .calculator {
            position: relative;
            z-index: 3;
            backdrop-filter: blur(18px);
            background: rgba(255, 255, 255, 0.08);
            border-radius: 22px;
            padding: 25px;
            width: 280px;
            box-shadow: 0 0 40px rgba(0, 255, 255, 0.45);
            border: 1px solid rgba(255,255,255,0.18);
            animation: float 4s ease-in-out infinite;
            transition: transform 0.15s ease;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        #display {
            width: 100%;
            height: 55px;
            font-size: 24px;
            margin-bottom: 18px;
            text-align: right;
            padding: 10px;
            border: none;
            border-radius: 12px;
            background: rgba(0, 0, 0, 0.6);
            color: #00fff0;
            box-shadow: inset 0 0 14px rgba(0,255,255,0.6);
        }

        .buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        button {
            height: 55px;
            font-size: 18px;
            border: none;
            border-radius: 14px;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.12);
            color: #ffffff;
            box-shadow: 0 0 12px rgba(0,255,255,0.45);
            transition: transform 0.15s ease, box-shadow 0.15s ease;
        }

        button:active {
            transform: scale(0.92);
            box-shadow: 0 0 25px rgba(0,255,255,1);
        }

        .operator { color: #ffb703; }

        .equal {
            grid-column: span 2;
            background: linear-gradient(135deg, #00fff0, #00bcd4);
            color: #000;
            font-weight: bold;
        }

        .clear {
            grid-column: span 2;
            background: linear-gradient(135deg, #ff416c, #ff4b2b);
            color: white;
            font-weight: bold;
        }

        canvas {
            position: absolute;
            inset: 0;
            z-index: 1;
        }
    </style>
</head>
<body>

<div class="parallax">
    <div class="layer one"></div>
    <div class="layer two"></div>
</div>

<canvas id="viz"></canvas>

<div class="calculator" id="calc">
    <input type="text" id="display" disabled>
    <div class="buttons">
        <button class="clear">C</button>
        <button class="operator">/</button>
        <button class="operator">*</button>
        <button>7</button><button>8</button><button>9</button><button class="operator">-</button>
        <button>4</button><button>5</button><button>6</button><button class="operator">+</button>
        <button>1</button><button>2</button><button>3</button>
        <button>0</button><button>.</button><button class="equal">=</button>
    </div>
</div>

<script>
    const display = document.getElementById("display");
    const buttons = document.querySelectorAll("button");
    const calc = document.getElementById("calc");
    const layers = document.querySelectorAll('.layer');
    let expression = "";

    buttons.forEach(b => b.addEventListener('click', () => {
        burstParticles();
        handleInput(b.textContent);
    }));

    document.addEventListener('keydown', e => {
        const k = e.key;
        if ((k>='0' && k<='9') || ['+','-','*','/','.'].includes(k)) expression+=k;
        else if (k==='Enter') calculate();
        else if (k==='Backspace') expression=expression.slice(0,-1);
        else if (k.toLowerCase()==='c') expression='';
        display.value = expression;
    });

    function handleInput(v){ if(v==='C') expression=''; else if(v==='=') calculate(); else expression+=v; display.value=expression; }
    function calculate(){ try{ expression=eval(expression).toString(); display.value=expression;}catch{ expression=''; display.value='Error'; } }

    document.addEventListener('mousemove', e => {
        const x=(window.innerWidth/2-e.clientX)/35;
        const y=(window.innerHeight/2-e.clientY)/35;
        calc.style.transform=`rotateX(${y}deg) rotateY(${-x}deg)`;
        layers[0].style.transform=`translate(${x*3}px,${y*3}px)`;
        layers[1].style.transform=`translate(${x*6}px,${y*6}px)`;
    });

    /* GYROSCOPE SUPPORT */
    window.addEventListener('deviceorientation', e => {
        const x = e.gamma/6;
        const y = e.beta/6;
        calc.style.transform = `rotateX(${y}deg) rotateY(${x}deg)`;
    });

    /* PARTICLE VISUALIZATION */
    const canvas = document.getElementById('viz');
    const ctx = canvas.getContext('2d');
    let w,h;
    function resize(){ w=canvas.width=innerWidth; h=canvas.height=innerHeight; }
    window.addEventListener('resize',resize); resize();

    const particles = Array.from({length:140},()=>({x:Math.random()*w,y:Math.random()*h,vx:(Math.random()-0.5)*0.6,vy:(Math.random()-0.5)*0.6}));

    function burstParticles(){ particles.forEach(p=>{ p.vx+=(Math.random()-0.5)*2; p.vy+=(Math.random()-0.5)*2; }); }

    function animate(){
        ctx.clearRect(0,0,w,h);
        particles.forEach((p,i)=>{
            p.x+=p.vx; p.y+=p.vy;
            if(p.x<0||p.x>w) p.vx*=-1;
            if(p.y<0||p.y>h) p.vy*=-1;
            ctx.fillStyle='rgba(0,255,255,0.6)';
            ctx.fillRect(p.x,p.y,2,2);
            for(let j=i+1;j<particles.length;j++){
                const q=particles[j];
                const d=Math.hypot(p.x-q.x,p.y-q.y);
                if(d<120){ ctx.strokeStyle=`rgba(0,255,255,${1-d/120})`; ctx.beginPath(); ctx.moveTo(p.x,p.y); ctx.lineTo(q.x,q.y); ctx.stroke(); }
            }
        });
        requestAnimationFrame(animate);
    }
    animate();
</script>

</body>
</html>
